<div class="page-container">
  <div class="card-list">
    <div class="card-header">
      <div class="header-content">
        <h2>Mot√©is</h2>
        <p class="subtitle">Reserve uma su√≠te</p>
      </div>
      <button *ngIf="isAdmin" class="btn-new" [routerLink]="['/motel/new']">
        <span class="icon">+</span> Adicionar Motel
      </button>
    </div>

    <div class="card-body">
      <div *ngIf="motels.length === 0" class="empty-state">
        <span class="empty-icon">üè¢</span>
        <p>Nenhum motel encontrado.</p>
      </div>

      <div *ngIf="motels.length > 0" class="table-responsive">
        <table class="main-table">
          <thead>
            <tr>
              <th class="col-name">Nome</th>
              <th class="col-address">Endere√ßo</th>
              <th class="col-phone">Telefone</th>
              <th class="col-actions" *ngIf="isAdmin">A√ß√µes</th>
              <th class="col-suites">Su√≠tes</th>
            </tr>
          </thead>
          <tbody>
            <ng-container *ngFor="let motel of motels">
              <tr class="motel-row" [class.active-row]="selectedMotelId === motel.id && showAvailableSuites">
                <td class="col-name">{{ motel.name }}</td>
                <td class="col-address">{{ motel.address }}</td>
                <td class="col-phone">{{ motel.phone }}</td>
                <td class="col-actions" *ngIf="isAdmin">
                  <div class="action-buttons">
                    <button class="btn-icon btn-edit" [routerLink]="['/motel/edit', motel.id]" title="Editar">
                      ‚úèÔ∏è
                    </button>
                    <button class="btn-icon btn-delete" (click)="deleteMotel(motel.id)" title="Excluir">
                      üóëÔ∏è
                    </button>
                  </div>
                </td>
                <td class="col-suites">
                  <button class="btn-toggle" [class.expanded]="selectedMotelId === motel.id && showAvailableSuites"
                    (click)="toggleAvailableSuites(motel.id!)">
                    {{ selectedMotelId === motel.id && showAvailableSuites ? 'Ocultar' : 'Visualizar' }}
                  </button>
                </td>
              </tr>

              <tr *ngIf="selectedMotelId === motel.id && showAvailableSuites" class="suites-row">
                <td [attr.colspan]="isAdmin ? 5 : 4" class="suites-cell">
                  <div class="suites-wrapper">
                    <div class="suites-header">
                      <h5>Su√≠tes Dispon√≠veis - {{ motel.name }}</h5>
                    </div>

                    <div *ngIf="availableSuites.length > 0" class="suites-card-grid">
                      <div class="suite-card" *ngFor="let suite of availableSuites">
                        <div class="suite-card-image">
                          <img *ngIf="suite.imageUrl" [src]="getImageUrl(suite)" [alt]="suite.name">
                          <div *ngIf="!suite.imageUrl" class="no-image-placeholder">
                            <span>üñºÔ∏è</span>
                          </div>
                          <div class="suite-price-tag">
                            {{ suite.pricePerPeriod | currency }}
                          </div>
                        </div>

                        <div class="suite-card-content">
                          <div class="suite-header">
                            <h4>{{ suite.name }}</h4>
                            <span class="occupancy-badge">
                              üë• {{ suite.maxOccupancy }}
                            </span>
                          </div>

                          <p class="suite-description">{{ suite.description }}</p>

                          <div class="suite-card-actions">
                            <button class="btn-block btn-reserve" [routerLink]="['/reserve/new']"
                              [queryParams]="{ suiteId: suite.id, motelId: motel.id }">
                              Reservar Agora
                            </button>
                            <button *ngIf="isAdmin" class="btn-icon-edit" [routerLink]="['/suite/edit', suite.id]"
                              title="Editar Su√≠te">
                              ‚úèÔ∏è
                            </button>
                            <button *ngIf="isAdmin" class="btn-icon-remove" title="Remover Su√≠te"
                              (click)="deleteAvailableSuite(motel.id!, suite.id!)">
                              üóëÔ∏è
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div *ngIf="availableSuites.length === 0" class="suites-empty">
                      <p>Nenhuma su√≠te dispon√≠vel para este motel.</p>
                    </div>
                  </div>
                </td>
              </tr>
            </ng-container>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>